---
layout:     post
title:      计算机网络基础知识
subtitle:   MindManager
date:       2019-05-10
author:     LHaisong
header-img: img/post-bg-re-vs-ng2.jpg
catalog: true
tags:
    - 计算机网络
---

# 协议分层

OSI七层模型：

应用层-->表示层-->会话层-->传输层-->网络层-->链路层-->物理层

五层模型：

应用层-->传输层-->网络层-->链路层-->物理层

# 传输层

在应用程序端点之间传送应用层报文，为运行在不同主机上的应用进程提供逻辑通信

- 多路分解与多路复用

  > 多路分解：在接收端运输层检查这些字段，标识出接收套接字，进而将报文定向到接收套接字，将传输层报文正确交付到套接字的行为
  >
  > 多路复用：在发送端从套接字中取出数据块，并为每个数据块加上首部信息从而生成报文段，然后将数据报传输到网络层

- UDP：是面向无连接的，不保证数据的可靠交互，分组首部开销小

- TCP：是在不可靠的（IP）端到端网络层之上实现的可靠数据传输协议，在传送数据前需要通过三次握手建立连接，TCP连接是全双工的，即客户端与服务器可以相互传送数据。差错检验，选择重传，累积确认，定时器，首部序号字段

- TCP可靠数据传输原理：

> 可靠数据传输应该满足两个要求：
>
> 1.传输信道是可靠的，不会产生差错
>
> 2.保证数据传输的正确性、有序性、无差错、不重复
>
> TCP为了提供可靠数据传输做了哪些事？
>
> 1.首先，使用**3次握手**建立连接，**4次挥手**释放连接，从而保证了传           输信道是可靠的
>
> 2..使用基于重传机制的可靠数据传输协议（ARQ）保证数据传输的正确性，与**差错检验、接收方反馈、重传**一起处理存在比特差错的情况，为了提高数据传输的效率，TCP采用了流水线技术，使用**回退N步和选择重传**解决比特差错问题，使用**滑动窗口协议**来保证接方能够及时处理所接收到的数据，进行流量控制。
>
> 3.最后，TCP使用**慢开始**、**拥塞避免**、**快重传**和**快恢复**来进行拥塞控制，避免网络拥塞。

1. 可靠数据传输原理

   1. 经完全可靠信道的数据传输原理rdt1.0

      假设信道不会出现差错，接收端也会向发送端发送确认字段，默认不会出错

   2. 经具有比特差错的可靠数据传输原理rdt2.0

      基于重传机制的可靠数据传输自动请求重传（ARQ）

      ①差错检验：奇偶检验、检验和、循环冗余检验

      ②接收方反馈：肯定确认和否定确认

      ③重传：收到有差错的报文时接收方重传

      如何避免ACK和NAK丢失的情况？

      在分组中添加一个确认字段

   3. 经具有比特差错的丢包信道的可靠数据传输原理rdt3.0

      如何确定分组丢失或者确认ACK丢失？

      增加一个实时延，在这个时间内没有ACK收到响应则重传分组

   4. 流水线可靠数据传输原理

      rdt3.0是正确的，但是效率不高，是一种停等协议

      流水线差错恢复的方法

      1.回退N步（GBN）：允许发送方发送多个分组而不必等待确认，但是未确认的分组数不能超过N。缺点：存在性能问题，单个分组丢死可能会造成大量的分组重传

      2.选择重传（SR）：让发送方重传那些接收方怀疑出错的分组，从而避免不必要的重传

2. TCP的连接和断开

   参考：<https://blog.csdn.net/qzcsu/article/details/72861891>

   为什么需要三次握手四次挥手？

   <https://blog.csdn.net/xifeijian/article/details/12777187>

3. TCP拥塞控制原理

   1. 慢启动
   2. 拥塞避免
   3. 快速恢复
     
  # 应用层

概述：是应用程序及他们的应用层协议存留大的地方，套接字是应用程序和传输层协议之间的接口

应用层协议定义了在不同的端系统上的应用层序是如何传递报文的

> 1.报文类型：请求报文or响应报文
> 2.各种报文类型的语法：如字段的描述
> 3.字段的语义
> 4.一个进程如何发送报文，以及响应机制

常见的几种应用层协议：

HTTP：超文本传输协议，有客户端和服务器组成，C-S存在不同的端系统中通过HTTP报文进行会话。HTTP是一个无状态的协议，因为它不保存和客户有关的状态信息，默认采用持续连接。HTTP报文格式：请求行（方法字段、URL、版本）、首部行（主机）

- 方法字段：

  1. GET:从服务器获取资源，只用于数据的获取，而不应当应用于会产生副作用的非幂等的操作，get操作是不安全的
  2. HEAD:与GET方法一样，都是向服务器发出指定资源的请求。但是，服务器在响应HEAD请求时不会回传资源的内容部分，即：响应主体。这样，我们可以不传输全部内容的情况下，就可以获取服务器的响应头信息。HEAD方法常被用于客户端查看服务器的性能。
  3. POST:向指定资源提交数据，请求服务器进行处理，如：表单数据提交、文件上传等，请求数据会被包含在请求体中。POST方法是非幂等的方法，因为这个请求可能会创建新的资源或/和修改现有资源。
  4. PUT:向指定资源位置上传其最新内容，PUT方法是幂等的方法。通过该方法客户端可以将指定资源的最新数据传送给服务器取代指定的资源的内容。

- 什么是幂等方法？

  > HTTP 幂等方法是指无论调用多少次都不会有不同结果的 HTTP方法。它无论是调用一次，还是十次都无关紧要。结果仍应相同。再次强调， 它只作用于结果而非资源本身。它仍可能被操纵（如一个更新的 timestamp），提供这一信息并不影响（当前）资源的表现形式。

- cookie和session

  > cookie:由于HTTP是无状态的协议，但是很多情况下又需要保存客户端信息，所以使用了cookie.当客户端请求服务器时，首先由服务器通过响应头把Cookie传输给客户端，客户端会将Cookie保存起来。当客户端再次请求同一服务器时，客户端会在请求头中添加该服务器保存的Cookie，发送给服务器。Cookie就是服务器保存在客户端的数据！
  >
  > session:session是依赖Cookie实现的。session是服务器端对象当用户第一次使用session时（表示第一次请求服务器），服务器会创建session，并创建一个Cookie，在Cookie中保存了session的id，发送给客户端。这样客户端就有了自己session的id了。但这个Cookie只在浏览器内存中存在，也就是说，在关闭浏览器窗口后，Cookie就会丢失，也就丢失了sessionId。

  区别：

  1. Cookie是把用户的数据写给用户的浏览器。
  2. Session技术把用户的数据写到用户独占的session中。
  3. Session对象由服务器创建，开发人员可以调用request对象的getSession方法得到session对象。

  参考链接：

  <https://blog.csdn.net/weixin_36416680/article/details/80506150>

  <https://blog.csdn.net/duan1078774504/article/details/51912868>

- HTTP和HTTPS的区别

  HTTPS是以安全为目标的HTTP，在HTTP中加入了SSL层，利用 SSL/TLS 来加密数据包，HTTPS 开发的主要目的，是提供对网站服务器的身份认证，保护交换数据的隐私与完整性。

  参考链接：<https://www.runoob.com/w3cnote/http-vs-https.html>

- HTTP1.0、HTTP1.1、HTTP2.0

  参考：<https://blog.csdn.net/qq_36183935/article/details/81156225>

- HTTP缓存技术：

  重用已获取的资源能够有效的提升网站与应用的性能。Web 缓存能够减少延迟与网络阻塞，进而减少显示某个资源所用的时间。借助 HTTP 缓存，Web 站点变得更具有响应性。

  参考链接：[https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ#(%E7%A7%81%E6%9C%89)%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ#(私有)浏览器缓存)

FTP：文件传输协议，FTP使用了两个并行的TCP连接，一个是控制连接，一个是数据连接

SMTP：邮件传输协议

DNS服务：复制将域名解析为IP地址

- 递归查询
- 迭代查询

# 网络层

将网络层数据报从源主机移动到另一台主机，运输层协议(TCP、UDP)向网络层递交运输层报文段和目的地址

- 转发和路由选择

  > 1.转发指的是当一个分组到达路由器的一条输入链路时，必须为它选择一条合适输出链路
  >
  > 2.路由选择：路由选择是全局性的，将分组从发送到发送到目的端根据路由选择算法选择一条合适的链路

- 虚电路和数据报网络

  > 虚电路网络：在网络层提供连接服务的计算机网络
  >
  > 数据报网络：在网络层提供面向无连接的计算机网络

- IP协议

  1.数据报格式

  2.IP分片：

  3.Ipv4编址：

  > A类地址：前8位表示子网地址，子网掩码255.0.0.0
  >
  > B类地址：前16位表示子网地址，子网掩码255.255.0.0
  >
  > C类地址：前24位表示子网地址，子网掩码255.255.255.0

- 路由选择算法

  全局式：链路状态法（LS），原理为Dijkstra算法

  分散式：距离向量算法（DV）

- 因特网自治系统内部路由选择：

  1.路由信息选择协议（RIP）：以到子网的跳数作为路径费用，最大15跳，大于这个数据将会被丢弃

  2.开放最短路径优先（OSPF）：实现原理是Dijkstra算法

- ARP协议：根据IP地址获得物理地址

# 链路层

网络层将数据报传给链路层，链路层沿着路径将将数据报传输给下一个节点

- 链路层提供的服务：

  1.成帧：一个链路层帧由一个数据字段和若干首部字段构成，如传输层帧、网络层帧、链路层帧（如果使用不同的链路层协议，则链路层帧不同）

  2.链路接入

  3.可靠交互：确认和重传

  4.差错检验和纠正：

  1. 奇偶校验：根据1的个数
  2. 检验和方法：对比特序列求反相加
  3. 循环冗余检测（CRC）：

- 多路访问协议

  由于每个链路节点都能传输帧，当同事传输同一个帧时接收方将会发生碰撞，碰撞发生时信号将发生丢失

  1.信道划分协议

  - 时分多路复用（TDM）：将时间划分为多个时间帧，进一步将帧划分为多个时隙

    > 缺点：
    >
    > 1.速率被限制：当只有一个分组要发送时也被限制为R/Nbps
    >
    > 2.节点必须等待他的轮次，如果只有一个分组要传输这会很糟糕

  - 频分多路复用（FDM）：将广播信道划分为多个频道，缺点与TDM一样，缺陷同上

  2.随机接入协议：当发生碰撞时，发生碰撞的结点都会重发分组，重发时会选择一个随机试时延

  - 时隙ALOHA：

  - 载波侦听多路访问（CSMA）：

    载波侦听：节点在传输之前先检查信道上是否有一个节点在传输帧

    碰撞检测：一个传输节点在传输时侦听信道，如果它检测到	有节点在干扰传输，他就停止传输，直到有空隙

  - 轮流协议：

    轮询协议：设置一个主节点轮询每个节点

    轮流协议：不设置主节点，采用令牌传递的方式

- 链路层寻址ARP协议：主机或路由器的适配器接口具有链路层地址，有多个接口则具有多个地址。数据帧在链路层从一个节点传送到另一个节点必须具备下一个节点的链路层地址才行，这个地址叫MAC地址

  


